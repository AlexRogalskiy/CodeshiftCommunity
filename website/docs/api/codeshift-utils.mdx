---
id: utils
title: codeshift/utils
slug: /utils
---

CodeshiftCommunity provides a set of utilities to help perform common codemod operations.

## Installation

`@codeshift/utils` is pre-bundled with every codemod that is published to the [community folder](https://github.com/CodeshiftCommunity/CodeshiftCommunity/tree/main/community),
so there's no need to install it manually.

However, it is also available for use outside of this project and compatible with jscodeshift.

`npm install --save-dev @codeshift/utils` or `yarn add -D @codeshift/utils`

## Imports

### `hasImportDeclaration(j, source, sourcePath)`

Finds an import declaration by source name

**Returns**

`boolean`

**Example**

```jsx
// src/App.js
import React from 'react';
```

```js
import { hasImportDeclaration } from '@codeshift/utils';

hasImportDeclaration(j, source, 'react'); // True
```

### `getImportDeclaration(j, source, sourcePath)`

Returns an import declaration by source name

**Returns**

`Collection`: Collection containing 1 or more imports

**Example**

```jsx
// src/App.js
import React from 'react';
```

```js
import { getImportDeclaration } from '@codeshift/utils';

getImportDeclaration(j, source, 'react');
```

### `removeImportDeclaration(j, source, sourcePath)`

Removes an import declaration by source name

**Returns**

`void`

**Example**

```jsx
// src/App.js
import React from 'react';
```

```js
import { removeImportDeclaration } from '@codeshift/utils';

removeImportDeclaration(j, source, 'react');
```

```diff
// src/App.js
-import React, { useEffect } from 'react';
```

### `getDefaultImportSpecifier(j, source, specifier)`

Finds a default import specifier by name

**Returns**

`Collection`: Collection containing all matched default import specifiers

**Example**

```jsx
// src/App.js
import React from 'react';
```

```js
import { getDefaultImportSpecifier } from '@codeshift/utils';

getDefaultImportSpecifier(j, source, 'React'); // Collection containing 'React'
```

### `hasImportSpecifier(j, source, sourcePath)`

Checks for an import import specifier

**Returns**

`boolean`

**Example**

```jsx
// src/App.js
import React, { useEffect } from 'react';
```

```js
import { hasImportSpecifier } from '@codeshift/utils';

hasImportSpecifier(j, source, 'react', 'useEffect'); // True
```

### `getImportSpecifier(j, specifier, source)`

Finds an import specifier by name

**Returns**

`Collection`: Collection containing all matched import specifiers

**Example**

```jsx
// src/App.js
import React, { useEffect } from 'react';
```

```js
import { getImportSpecifier } from '@codeshift/utils';

getImportSpecifier(j, source, 'useEffect'); // Collection containing 'useEffect'
```

### `getImportSpecifierName(j, specifier, source)`

Returns the local name of an import. This is useful for cases where an import specifier is potentially aliased.

**Returns**

`string` | null: specifier name or null if not found

**Example**

```jsx
// src/App.js
import React, { useEffect as foo } from 'react';
```

```js
import { getImportSpecifierName } from '@codeshift/utils';

getImportSpecifierName(j, source, 'useEffect', 'react'); // 'foo'
```

### `insertImportSpecifier(j, source, specifier)`

Inserts an import specifier

**Returns**

`void`

**Example**

```jsx
// src/App.js
import React, { useEffect } from 'react';
```

```js
import { getImportSpecifier } from '@codeshift/utils';

insertImportSpecifier(j, source, 'useMemo', 'react'); // Collection containing 'useEffect'
```

```diff
// src/App.js
-import React, { useEffect } from 'react';
+import React, { useEffect, useMemo } from 'react';
```

## JSX

### `getJSXAttributesByName(j, source, attributeName)`

Finds a JSX attributeName (aka prop) by name

**Returns**

`Collection`: Collection containing all matched jsx attributes

**Example**

```jsx
// src/App.js
import React from 'react';

const App = () => <Button primary>Say hello</Button>;
```

```js
import { getJSXAttributesByName } from '@codeshift/utils';

getJSXAttributesByName(j, source, 'primary'); // Collection containing 'primary'
```

### `hasJSXAttributesByName(j, source, attributeName)`

Finds a JSX attributeName (aka prop) by name and returns true if found

**Returns**

`boolean`

**Example**

```jsx
// src/App.js
import React from 'react';

const App = () => <Button primary>Say hello</Button>;
```

```js
import { hasJSXAttributesByName } from '@codeshift/utils';

hasJSXAttributesByName(j, source, 'primary'); // Found!
```

## Comments

### `addCommentBefore(j, source, message)`

Appends a comment before the provided node

**Returns**

`void`

**Example**

```jsx
// src/App.js
import React from 'react';

const App = () => <Button primary>Say hello</Button>;
```

```js
import { addCommentBefore } from '@codeshift/utils';

addCommentBefore(
  j,
  path.find(j.ImportDeclaration),
  'This should be removed in favour of mylib',
);
```

```js
// src/App.js
import React from 'react';

// TODO: (Codemod) This should be removed in favour of mylib
const App = () => <Button primary>Say hello</Button>;
```

### `addCommentToStartOfFile(j, source, message)`

Appends a comment to the start of a file

**Returns**

`void`

**Example**

```jsx
// src/App.js
import React from 'react';

const App = () => <Button primary>Say hello</Button>;
```

```js
import { addCommentToStartOfFile } from '@codeshift/utils';

addCommentToStartOfFile(
  j,
  path.find(j.ImportDeclaration),
  'This should be removed in favour of mylib',
);
```

```js
// src/App.js
// TODO: (Codemod) This should be removed in favour of mylib
import React from 'react';

const App = () => <Button primary>Say hello</Button>;
```

## Motions

### `applyMotions(j, source, motions)`

Applies an array of motions to your AST

**Returns**

`void`

**Example**

```js
import { applyMotions } from '@codeshift/utils';
import { sortImports } from './motions';

applyMotions(j, j(fileInfo.source), [sortImports, removeVar]);
```
